🚀 动态多进程代理池 (zzmulti_proxy_pool)这是一个基于 Python 多进程、多线程和 文件同步 的高性能动态代理池系统。
    这是一个基于 Python **多进程**、**多线程**和 **文件同步** 的高性能动态代理池工具，支持HTTP和SOCKS5代理。自己用来做渗透测试时的代理小工具，可以自定义的灵活切换代理，支持按时间间隔或按请求次数自动切换代理，代理池取自悠悠免费代理，可自定义时间间隔抓取免费代理，可开箱即用。


## 版本信息

### 当前版本：v1.0
- 基础代理池管理功能
- HTTP和SOCKS5代理支持
- 代理健康检查
- 自动代理切换

### 计划更新 (v1.1)
- 🕵️ **高匿性检查**: 增加代理匿名级别检测功能，确保代理的匿名性
- 💰 **付费接口支持**: 集成悠悠网络代理付费接口，获取更高质量的代理资源

## 功能特点 (v1.0)

- 🔄 **多代理管理**: 支持HTTP和SOCKS5代理协议
- 🌐 **API自动获取**: 支持从API自动获取代理列表
- 🔍 **健康检查**: 定期检查代理可用性，自动移除失效代理
- ⚙️ **灵活切换**: 支持按时间或请求数量自动切换代理
- 📝 **状态同步**: 多进程间代理状态同步
- 🖥️ **多协议支持**: 同时提供HTTP和SOCKS5代理服务
- 🛡️ **容错机制**: 代理失败时自动切换到下一个可用代理
- 📊 **分级日志**: 控制台输出简洁信息，文件记录完整详细日志，兼顾清爽与完整性

## 计划中的功能 (v1.1)

- 🕵️ **高匿性检查**: 检测代理的匿名级别（透明代理、匿名代理、高匿代理）
- 💰 **付费接口集成**: 支持悠悠网络代理付费接口，获取更稳定、更快速的代理资源
- 📊 **代理质量评估**: 基于响应时间和稳定性对代理进行评分
- 🎯 **智能筛选**: 根据匿名级别和质量评分自动筛选最佳代理


## 🛠️ 快速开始

### 1. 准备工作

请确保您已安装 Python 3.x 环境，并安装所需的第三方库：

```bash
pip install -r requirements.txt
```

### 2. 配置文件 (config.ini)
请在脚本同级目录下创建或修改 config.ini 文件，以下是默认配置和说明：
```bash
[ProxyPool]
# HTTP代理监听端口
HTTP_LISTEN_PORT = 1233

# SOCKS5代理监听端口  
SOCKS5_LISTEN_PORT = 1234

# 代理切换模式: TIME(时间) 或 REQUEST(请求次数)
SWITCH_MODE = TIME

# 时间模式下的切换间隔(秒)
TIME_INTERVAL_SECONDS = 60

# 请求次数模式下的切换限制
REQUEST_COUNT_LIMIT = 100

# 代理API地址
API_URL = https://uu-proxy.com/api/free

# 本地代理缓存文件
PROXY_FILE = proxies.txt

# 可用性检查URL
AVAILABILITY_CHECK_URL = https://www.baidu.com

# 是否启用匿名性检查
ANONYMITY_CHECK_ENABLED = false

# 健康检查间隔(秒)
HEALTH_CHECK_INTERVAL_SECONDS = 120

[ProxyFetch]
# 代理抓取间隔(秒)
FETCH_PROXY_INTERVAL_SECONDS = 120
```
### 3. 运行服务
直接运行主脚本即可：
Bashpython zz_multi_proxy_pool.py
### 4. 代理使用服务启动后，会自动从悠悠网络代理爬取免费代理
您可以通过以下地址使用代理：
```bash
http://127.0.0.1:1233
socks5://127.0.0.1:1234
```
<img width="2188" height="1130" alt="image" src="https://github.com/user-attachments/assets/24508d5c-d65b-487e-b2b5-0b62d2b26489" />

你也可以在 `proxies.txt` 文件中手动添加代理，代理列表文件中的代理格式应为：
```
scheme://ip:port
```

例如：
```
http://192.168.1.1:8080
https://192.168.1.2:8443
socks4://192.168.1.3:1080
socks5://192.168.1.4:1080
```

### 5. 代理测试和使用
将配置文件中代理切换模式更改为以下配置，意味着请求一次会切换一次代理ip
```bash
SWITCH_MODE = REQUEST
REQUEST_COUNT_LIMIT = 1
```
current.ip.16yun.cn:802访问该网站可以显示自己当前ip，使用以下命令进行多次访问测试
```bash
curl --proxy http://127.0.0.1:1233 http://current.ip.16yun.cn:802
```
通过测试截图可知，能成功请求一次会切换一次代理
<img width="1694" height="392" alt="image" src="https://github.com/user-attachments/assets/1eb507c7-29ab-49d2-a53d-03444c904730" />

接下来我们就可以进行测试啦，over~


## 工作原理

1. **初始化**:
   - 从配置文件加载设置
   - 从本地文件加载代理列表
   - 如果配置了API，则从API获取代理

2. **健康检查**:
   - 定期检查所有代理的可用性
   - 将可用代理标记为"可用"
   - 失效代理从可用列表中移除

3. **代理服务**:
   - HTTP和SOCKS5服务器同时运行
   - 根据配置的切换模式自动切换代理
   - 代理失败时自动切换到下一个可用代理

4. **状态同步**:
   - 保存当前代理状态到文件
   - 支持多进程间状态同步

## 日志

程序运行时会在控制台输出日志，并同时写入 `log.txt` 文件。日志包含：
- 代理切换信息
- 健康检查结果
- API获取结果
- 错误信息

## 故障排除

1. **无法连接到代理**:
   - 检查代理格式是否正确
   - 确认代理是否可用
   - 查看日志中的错误信息

2. **API获取失败**:
   - 检查API_URL是否正确
   - 确认API返回格式是否符合要求
   - 查看日志中的错误信息

3. **健康检查失败**:
   - 检查AVAILABILITY_CHECK_URL是否可访问
   - 调整HEALTH_CHECK_INTERVAL_SECONDS参数


## 更新日志

### v1.0 (当前版本)
- 初始版本发布
- 基础代理池管理功能
- HTTP和SOCKS5代理支持
- 代理健康检查
- 自动代理切换
- API代理获取

### v1.1 (计划中)
- [ ] 高匿性检查功能
- [ ] 悠悠网络代理付费接口集成
- [ ] 代理质量评估系统
- [ ] 智能代理筛选机制



